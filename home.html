from google.cloud import storage
import requests

# Set up Google Cloud Storage client
client = storage.Client()

# Upload the image to Google Cloud Storage
bucket = client.get_bucket("YOUR_BUCKET_NAME")
blob = bucket.blob("image.jpg")
blob.upload_from_filename("/path/to/your/image.jpg")

# Get the URL of the uploaded image
image_url = blob.public_url

# Set up the payload for ChatGPT-4
payload = {
    "model": "text-davinci-003",
    "prompt": "Generate a caption for this image:",
    "images": [image_url],
    "max_tokens": 50
}

# Send the request to ChatGPT-4
response = requests.post("https://api.openai.com/v1/completions", json=payload, headers=headers)

# Print the generated text response
print(response.json()["choices"][0]["text"])
